<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <style>
        .grid-container {
            display: grid;
            grid-template-columns: 50% 50%;
        }
        .editable-textbox{
            border: 1px solid black;
            width: auto;
            margin: 10px;
            height: 400px;
        }
    </style>
</head>

<body>
    <h1>My First Google Map</h1>
    <div class="grid-container">
        <div class="grid-item">
            <div class="editable-textbox" contenteditable="true" id = "textTarget">Enter some text here</div>
            <!-- <textarea rows="12" cols="50" id = "textTarget"></textarea> -->
        </div>
        <div class="grid-item">
            <div id="googleMap1" style="width:100%;height:400px;"></div>
        </div>
    </div>



    <script>
        function myMap() {
            //Map target, zoom and center required            
            var mapCanvas = document.getElementById('googleMap1');
            var textTarget = document.getElementById('textTarget');
            var mapCenter = { lat: 47.4829, lng: -122.2171 };
            var mapZoom = 5;
            var mapOptions = { center: mapCenter, zoom: mapZoom };
            var map = new google.maps.Map(mapCanvas, mapOptions);


            CreateMarker(map, mapCenter);
            CreateLine(map);
            CreateLine2(map);
            CreateLine3(map);

            google.maps.event.addListener(map, 'click', function (event) {
                CreateMarker(map, event.latLng);
                AddTextSection(event.latLng);
                
            })


        }
        function CreateLine(map) {
            var Home = new google.maps.LatLng(47.479401, -122.212219);
            var techAcademySeattle = new google.maps.LatLng(47.479366, -122.210619);
            var myLine = [techAcademySeattle, Home];
            var walkPath = new google.maps.Polyline({
                path: [techAcademySeattle, Home],
                strokeColor: "#00ff00",
                strokeOpacity: 0.8,
                strokeWeight: 8
            });
            walkPath.setMap(map);
        }
        function CreateLine2(map) {
            var Home = new google.maps.LatLng(47.479401, -122.212219);
            var techAcademySeattle = new google.maps.LatLng(47.479366, -122.210619);
            var myLine = [techAcademySeattle, Home];
            var walkPath = new google.maps.Polyline({
                path: [techAcademySeattle, Home],
                strokeColor: "#ff0000",
                strokeOpacity: 1,
                strokeWeight: 4,
                zIndex: 500
            });
            walkPath.setMap(map);
        }
        function CreateLine3(map) {
            var Home = new google.maps.LatLng(47.479401, -122.212219);
            var techAcademySeattle = new google.maps.LatLng(47.556619, -122.285892);
            var myLine = [techAcademySeattle, Home];
            var walkPath = new google.maps.Polyline({
                path: [techAcademySeattle, Home],
                strokeColor: "#ff0000",
                strokeOpacity: 1,
                strokeWeight: 4,
                zIndex: 501
            });
            walkPath.setMap(map);
        }
        function CreateMarker(map, mapCenter) {
            var marker = new google.maps.Marker({
                position: mapCenter,
                icon: "smileyFace1.png",
                animation: google.maps.Animation.BOUNCE,
                title: 'Click to Zoom'

            })
            marker.setMap(map);
            var s = mapCenter.lat;

            map.addListener('center_changed', function () {
                window.setTimeout(function () {
                    map.panTo(marker.getPosition());
                }, 3000);
            });
            marker.addListener('click', function () {
                map.setZoom(14);
                map.setCenter(marker.getPosition());
            });
        }
        function AddTextSection(latLng){
            
            textTarget.innerHTML = textTarget.innerHTML.substring(0,textTarget.selectionStart) + 
                                latLng.lat().toFixed(5) + textTarget.innerHTML.substring(textTarget.selectionEnd,textTarget.length-1);
        }

    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDolGuNslClF0NwUTIS4HPRCwLeJJBz6OI&callback=myMap"
        type="text/javascript"></script>
</body>

</html>